
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Boop Game</title>
<style>
    body {
        margin: 0;
        padding: 0;
        background-color: rgb(2, 2, 73);
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    #game-container {
        text-align: center;
        font-family: Verdana, Geneva, Tahoma, sans-serif;
        font-size: medium;
    }

    #instructions {
        margin-top: 20px;
    }

    .gameboard-container {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .gameboard {
        margin-top: 20px;
        display: grid;
        grid-template-columns: repeat(6, 70px);
        grid-template-rows: repeat(6, 70px);
        gap: 2px;
        border: 2px solid black;
        margin-bottom: 20px;
    }

    .cell {
        width: 70px;
        height: 70px;
        background-color: white;
        border: 1px solid black;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 36px;
        color: black;
    }

    .cell:hover {
        cursor: pointer;
        background-color: lightgray;
    }

    #new-game-btn {
        padding: 10px 20px;
        font-size: 18px;
        background-color: green;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    #new-game-btn:hover {
        background-color: darkgreen;
    }

    #turn-indicator {
        margin-bottom: 20px;
    }

    #blue-token-count {
        margin-top: 20px;
        text-align: left;
    }
</style>
</head>
<body>
<div id="game-container">
    <div id="instructions">
        <h2>Boop! A twist to tic-tac-toe...</h2>
        <p>Each player takes turns placing tokens ('X' and 'O') on the board.</p>
        <p>When a token is placed, it pushes adjacent tokens one square away, unless blocked by another token. Tokens on the edge of the board will be booped off the board.</p>
        <p>The first player to have three adjacent tokens horizontally, vertically, or diagonally wins!</p>
    </div>
    <div id="turn-indicator"></div>
    <div class="gameboard-container">
        <div class="gameboard" id="gameboard"></div>
        <div id="blue-token-count"></div>
    </div>
    <div id="message"></div>
    <button id="new-game-btn">Start New Game</button>
</div>

<script>
    const gameboard = document.getElementById('gameboard');
    const message = document.getElementById('message');
    const newGameBtn = document.getElementById('new-game-btn');
    const turnIndicator = document.getElementById('turn-indicator');
    const blueTokenCountElement = document.getElementById('blue-token-count');
    let currentPlayer = 'X';
    let currentPlayerColor = 'black'; // Current player color (black or blue)
    let blueTokenCountX = 0; // Blue token count for Player X
    let blueTokenCountO = 0; // Blue token count for Player O
    let boardState = Array.from({ length: 6 }, () => Array(6).fill({ token: '', color: '' }));
    let gameEnded = false;

    // Function to render the gameboard
    function renderGameboard() {
        gameboard.innerHTML = '';
        for (let i = 0; i < 6; i++) {
            for (let j = 0; j < 6; j++) {
                const cell = document.createElement('div');
                cell.classList.add('cell');
                cell.dataset.row = i;
                cell.dataset.col = j;
                cell.innerText = boardState[i][j].token;
                if (boardState[i][j].color === 'blue') {
                    cell.style.backgroundColor = 'blue'; // Display blue tokens in blue color
                    cell.style.color = 'white';
                }
                cell.addEventListener('click', handleCellClick);
                gameboard.appendChild(cell);
            }
        }
        renderBlueTokenCount(); // Render blue token count
    }

    // Function to handle cell click event
    function handleCellClick(event) {
        if (!gameEnded) {
            const row = parseInt(event.target.dataset.row);
            const col = parseInt(event.target.dataset.col);
            if (boardState[row][col].token === '') {
                boardState[row][col].token = currentPlayer;
                boardState[row][col].color = currentPlayerColor;
                boopTokens(row, col);
                renderGameboard();
                if (checkWin(currentPlayer)) {
                    message.innerText = `Player ${currentPlayer} wins!`;
                    gameEnded = true;
                } else {
                    // Switch player if the current player has no more blue tokens
                    if ((currentPlayer === 'X' && blueTokenCountX === 0) || (currentPlayer === 'O' && blueTokenCountO === 0)) {
                        currentPlayerColor = 'black';
                        currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                    }
                    updateTurnIndicator();
                }
            }
        }
    }

    // Function to update turn indicator
    function updateTurnIndicator() {
        turnIndicator.innerText = `Current Turn: Player ${currentPlayer}`;
    }

        // Function to give player three blue tokens
        function giveBlueTokens(player) {
        if (player === 'X') {
            blueTokenCountX += 3;
        } else if (player === 'O') {
            blueTokenCountO += 3;
        }
        renderBlueTokenCount(); // Update blue token count display
    }

    // Function to render blue token count for each player
    function renderBlueTokenCount() {
        blueTokenCountElement.innerHTML = `Blue Tokens:<br>Player X: ${blueTokenCountX}<br>Player O: ${blueTokenCountO}`;
    }
    
    // Function to boop tokens
    function boopTokens(row, col) {
        const directions = [[-1, 0], [1, 0], [0, -1], [0, 1], [-1, -1], [-1, 1], [1, -1], [1, 1]];
        for (const [dx, dy] of directions) {
            let x = row + dx;
            let y = col + dy;
            if (x >= 0 && x < 6 && y >= 0 && y < 6 && boardState[x][y].token !== '') {
                let nx = x + dx;
                let ny = y + dy;
                if (nx >= 0 && nx < 6 && ny >= 0 && ny < 6) {
                    if (boardState[nx][ny].token === '') {
                        boardState[nx][ny].token = boardState[x][y].token;
                        boardState[nx][ny].color = boardState[x][y].color;
                        boardState[x][y].token = '';
                        boardState[x][y].color = 'black';
                    }
                } else {
                    // Token to be booped is adjacent to the edge of the board
                    boardState[x][y].token = '';
                    boardState[x][y].color = 'black';
                }
            }
        }
    }

// Function to check for a win
function checkWin(player) {
    let blackTokensRemoved = false;
    // Check horizontal, vertical, and diagonal wins
    for (let i = 0; i < 6; i++) {
        for (let j = 0; j < 6; j++) {
            if (boardState[i][j].token === player) {
                // Check horizontal win
                if (j + 2 < 6 && boardState[i][j + 1].token === player && boardState[i][j + 2].token === player &&
                    boardState[i][j + 1].color === 'black' && boardState[i][j + 2].color === 'black') {
                    // Remove black tokens
                    boardState[i][j].token = '';
                    boardState[i][j + 1].token = '';
                    boardState[i][j + 2].token = '';
                    // Give player three blue tokens
                    giveBlueTokens(player);
                    blackTokensRemoved = true;
                }
                // Check vertical win
                if (!blackTokensRemoved && i + 2 < 6 && boardState[i + 1][j].token === player && boardState[i + 2][j].token === player &&
                    boardState[i + 1][j].color === 'black' && boardState[i + 2][j].color === 'black') {
                    // Remove black tokens
                    boardState[i][j].token = '';
                    boardState[i + 1][j].token = '';
                    boardState[i + 2][j].token = '';
                    // Give player three blue tokens
                    giveBlueTokens(player);
                    blackTokensRemoved = true;
                }
                // Check diagonal win (top-left to bottom-right)
                if (!blackTokensRemoved && i + 2 < 6 && j + 2 < 6 && boardState[i + 1][j + 1].token === player && boardState[i + 2][j + 2].token === player &&
                    boardState[i + 1][j + 1].color === 'black' && boardState[i + 2][j + 2].color === 'black') {
                    // Remove black tokens
                    boardState[i][j].token = '';
                    boardState[i + 1][j + 1].token = '';
                    boardState[i + 2][j + 2].token = '';
                    // Give player three blue tokens
                    giveBlueTokens(player);
                    blackTokensRemoved = true;
                }
                // Check diagonal win (top-right to bottom-left)
                if (!blackTokensRemoved && i + 2 < 6 && j - 2 >= 0 && boardState[i + 1][j - 1].token === player && boardState[i + 2][j - 2].token === player &&
                    boardState[i + 1][j - 1].color === 'black' && boardState[i + 2][j - 2].color === 'black') {
                    // Remove black tokens
                    boardState[i][j].token = '';
                    boardState[i + 1][j - 1].token = '';
                    boardState[i + 2][j - 2].token = '';
                    // Give player three blue tokens
                    giveBlueTokens(player);
                    blackTokensRemoved = true;
                }
            }
        }
    }
    if (blackTokensRemoved) {
        alert(`Three black tokens in a row detected! You've been awarded three blue tokens.`);
        renderGameboard(); // Update the board
        currentPlayer = currentPlayer === 'X' ? 'O' : 'X'; // Switch players after handling black tokens
        currentPlayerColor = blueTokenCountX > 0 || blueTokenCountO > 0 ? 'blue' : 'black'; // Check if current player has blue tokens
        updateTurnIndicator(); // Update turn indicator after player switch
    }
    return false;
}


   

// Function to give player three blue tokens
function giveBlueTokens(player) {
    if (player === 'X') {
        blueTokenCountX += 3;
    } else if (player === 'O') {
        blueTokenCountO += 3;
    }
}




    // Event listener for new game button
    newGameBtn.addEventListener('click', () => {
        currentPlayer = 'X';
        boardState = [
            [{ token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }],
            [{ token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }],
            [{ token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }],
            [{ token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }],
            [{ token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }],
            [{ token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }, { token: '', color: 'black' }]
        ];
        gameEnded = false;
        blueTokenCountX = 0;
        blueTokenCountO = 0;
        message.innerText = '';
        turnIndicator.innerText = '';
        renderGameboard();
        updateTurnIndicator();
    });

    // Function to update blue token counts
    function updateBlueTokenCounts() {
        blueTokenCounts.innerText = `Blue Tokens - Player X: ${blueTokenCountX}, Player O: ${blueTokenCountO}`;
    }

    renderGameboard();
    updateTurnIndicator();
</script>
</body>
</html>
